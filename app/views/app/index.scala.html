@(user_id: String, user_alias: String, user_avatar_url: String)

@layout("Clockwork Semaphore") {
<div class="container" ng-controller="AppCtrl"
     ng-init="init( '@user_id', {'@user_id':  {'alias': '@user_alias', 'avatar_url': '@user_avatar_url', 'following':false}} )">



    <nav id="main-navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-6">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Hello {{ get_user(current_user).alias }}</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6">
            <ul class="nav navbar-nav">
                <li><a ng-click="recent_posts()">Recent Posts</a></li>
                <li><a ng-click="followed_posts()">Followed Posts</a></li>
                <li><a href="logout">Logout</a></li>
            </ul>
        </div>
    </nav>





<div class="row">

    <div class="col-md-8 col-xs-8">
    <form class="form-inline" ng-submit="send()" ng-if="signup_complete()">
        <textarea ng-model="text" class="form-control" placeholder="> input message" class="message" id="tweeter"></textarea >
        <br>
        <input type="submit" class="form-control" />
    </form>

    <form class="form-inline" ng-submit="set_alias()" ng-if="!signup_complete()" >
        <input type="text" placeholder="pick a pseudonym" class="form-control" id="alias">
    </form>

    <br>

    <div class="panel panel-tweet" ng-repeat="message in get_messages()">
    <div class="panel-heading">
        <img ng-src="{{get_user(message.user_id).avatar_url}}" class="img-rounded">
        &nbsp
        {{ get_user(message.user_id).alias }}
    </div>
    <div class="panel-body">
        {{ message.body }}
        <span class="offset1 span2 label pull-right">
        <br>
        <a ng-click="delete_message(message)" ng-if="message.user_id==current_user">
            <i class="fa fa-trash-o fa-6"  title="delete post"></i></a>
        <a ng-click="favorite_message(message)" ng-if="message.user_id!=current_user">
            <i class="fa fa-star-o fa-6" ng-if="!message.favorite"  title="favorite message"></i>
            <i class="fa fa-star fa-6" ng-if="message.favorite" title="unfavorite message"></i>
        </a>
        &nbsp
        <a ng-click="follow_user(message.user_id)" ng-if="message.user_id!=current_user">
            <i class="fa fa-eye fa-6" ng-if="!following(message.user_id)" title="follow"></i>
            <i class="fa fa-eye-slash fa-6" ng-if="following(message.user_id)"  title="unfollow"></i>
        </a>


    </span>
    </div>
    </div>



    </div>
</div>


</div>
}
